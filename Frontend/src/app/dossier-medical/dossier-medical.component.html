<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MedPortal - Tableau des Patients</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <div class="page-container">

    <!-- Navbar -->
    <nav class="navbar">
      <div class="logo">
        <span class="logo-text">
          <i class="fas fa-heartbeat"></i> MedPortal
        </span>
      </div>
      <div class="nav-right">
        <img src="./assets/images/logo.png" alt="MedPortal Logo" class="nav-logo">
      </div>
    </nav>

    <div class="dashboard-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="profile-section" *ngIf="currentMedecin">
  <img src="../assets/images/utilisateur.png" alt="Doctor Profile" class="profile-image">
  <h3 class="doctor-name">
    <p> {{ currentMedecin.firstName }} {{ currentMedecin.lastName }} </p>
    <p class="speciality">Médecin Généraliste</p>
  </h3>
</div>
        <nav class="sidebar-nav">
          <ul>
            <li>
              <a href="register">
                <i class="fas fa-user-plus"></i>
                <span>Nouveau patient</span>
              </a>
            </li>
            <li>
              <a href="tableau-patient">
                <i class="fas fa-users"></i>
                <span>Liste des patients</span>
              </a>
            </li>
            <li>
                <a href="gestion-rendez-vous">
                  <i class="fas fa-calendar-check"></i>
                  <span>Rendez-vous</span>
                  <span class="message-badge">5</span>
                </a>
              </li>
            <li>
          <a href="dossier-medical" class="active">
            <i class="fas fa-folder-plus"></i>
            <span>Dossiers Médicaux</span>
          </a>
        </li>
            <li>
              <a href="conversation">
                <i class="fas fa-envelope"></i>
                <span>Messagerie</span>
              </a>
            </li>
            <li>
              <a href="notification">
                <i class="fas fa-inbox"></i>
                <span>Notification</span>
              </a>
            </li>
            <li class="logout-item" >
              <a href="#" (click)="logout($event)">
                <i class="fas fa-sign-out-alt"></i>
                <span>Déconnexion</span>
              </a>
              
			  </li>
			  
          </ul>
        </nav>
      </aside>
        <div class="dossier-medical-container">
  <h2>Dossier Médical du Patient</h2>

<div class="pdf-grid" *ngIf="pdfListWithPatient.length > 0; else noPdf">
  <div *ngFor="let pdf of pdfListWithPatient" class="pdf-card" (click)="downloadPdf(pdf.downloadUrl)">
    <h4>{{ pdf.patientName }}</h4>
    <i class="fas fa-file-pdf pdf-icon"></i>
    <p class="pdf-name">{{ pdf.fileName }}</p>
  </div>
</div>

<ng-template #noPdf>
  <p>Aucun dossier PDF disponible pour le moment.</p>
</ng-template>


<div>
  <h3>
    <i class="fas fa-calendar"></i>
          Ajouter un Dossier Medical
    </h3>
  <div>
  <form [formGroup]="dossierForm" (ngSubmit)="onSubmit()">
    <!-- Choix du patient -->
    <br>
    <div class="form-group">
      <label for="patientId">Sélectionner un patient</label>
      <select formControlName="patientId" class="form-input">
              <option *ngFor="let patient of patients | filter:searchText" [value]="patient.id">
                {{ patient.firstName }} {{ patient.lastName }}
              </option>
            </select>
    </div>

    <div class="form-group">
      <label for="taille">Taille (cm)</label>
      <input type="number" id="taille" formControlName="taille" placeholder="Ex: 170" />
    </div>

    <div class="form-group">
      <label for="poids">Poids (kg)</label>
      <input type="number" id="poids" formControlName="poids" placeholder="Ex: 65" />
    </div>

    <div class="form-group">
      <label for="groupeSanguin">Groupe Sanguin</label>
      <select id="groupeSanguin" formControlName="groupeSanguin">
        <option value="">-- Sélectionner --</option>
        <option *ngFor="let groupe of groupesSanguins" [value]="groupe">{{ groupe }}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="antecedents">Antécédents Médicaux</label>
      <textarea id="antecedents" formControlName="antecedents" rows="4" placeholder="Ex: diabète, hypertension..."></textarea>
    </div>

    <div class="form-group">
      <label for="traitements">Traitements en cours</label>
      <textarea id="traitements" formControlName="traitements" rows="3" placeholder="Ex: Metformine, Lévothyroxine..."></textarea>
    </div>

    <div class="form-group">
      <label for="allergies">Allergies connues</label>
      <input type="text" id="allergies" formControlName="allergies" placeholder="Ex: Pénicilline, pollen..." />
    </div>

    <div class="form-group">
      <label for="observations">Observations Médicales</label>
      <textarea id="observations" formControlName="observations" rows="4" placeholder="Remarques supplémentaires..."></textarea>
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="dossierForm.invalid">
  Créer le dossier médical
</button>

    </div>
  </form>
  </div>
  </div>
</div>
    </div>
  </div>


  <!-- Add Angular's script to load your app -->
  <script src="runtime.js"></script>
  <script src="polyfills.js"></script>
  <script src="main.js"></script>
</body>
</html>
